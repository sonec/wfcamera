<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{{ data[0]}}</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" >
  </head>
  <body>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="/static/js/jquery-3.2.1.min.js"></script>
    <script src="/static/js/popper.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>




<nav class="navbar navbar-light bg-light">
  <span class="h3" class="navbar-brand mb-0">{{ data[1] }}</span>
<ul class="navbar-nav">
	<li class="nav-item">
        <a class="nav-link" target="_blank" href="http://booth.local/printerface.php">Printer</a>
      </li>
	<li class="nav-item">
        <a class="nav-link" href="boothcontrol">Go to System</a>
      </li>
</ul>

</nav>
<div class="container">

		<div class="mt-2">
			<div class="form-group row">
			<label for="photos_taken" class="col-6 col-form-label">Photos taken</label>
			<div class="col-6">
			    <input type="text" readonly class="form-control" id="photos_taken" value="{{ data[2] }}" >
			</div>
			</div>
			<div class="form-group row">
			<label for="montages_taken" class="col-6 col-form-label">Montages taken</label>
			<div class="col-6">
			    <input type="text" readonly class="form-control" id="montages_taken" value="{{ data[3] }}" >
			</div>
			</div>
			<div class="form-group row">
			<label for="prints_taken" class="col-6 col-form-label">Prints taken</label>
			<div class="col-6">
			    <input type="text" readonly class="form-control" id="prints_taken" value="{{ data[4] }}" >
			</div>
			</div>
			</div>
			
			<div id="accordion" role="tablist">
  <div class="card">
    <div class="card-header" role="tab" id="headingOne">
      <h5 class="mb-0">
        <a data-toggle="collapse" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Camera
        </a>
      </h5>
    </div>

    <div id="collapseOne" class="collapse" role="tabpanel" aria-labelledby="headingOne" data-parent="#accordion">
      <div class="card-body">

<div class="form-group row">
			<label class="col-6 col-form-label">Flash</label>
			<div class="col-6">
			    <button class="btn btn-primary btn-block" id="flash">{{ data[8] }}</button>
			</div>
			</div>
<div class="form-group row">
			<label class="col-6 col-form-label">ISO</label>
			<div class="col-6">
			    <button class="btn btn-primary btn-block" id="iso">{{ data[11] }}</button>
			</div>
			</div>
<div class="form-group row">
			<label class="col-6 col-form-label">Shutter</label>
			<div class="col-6">
			    <button class="btn btn-primary btn-block" id="shutter">{{ data[12] }}</button>
			</div>
			</div>
			
			<button class="btn btn-success btn-lg btn-block" id="remotesnap">Remote Trigger</button>
      </div>
    </div>
  </div>
 <div class="card">
    <div class="card-header" role="tab" id="headingTwo">
      <h5 class="mb-0">
        <a class="collapsed" data-toggle="collapse" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
          Image Adjustment
        </a>
      </h5>
    </div>
    <div id="collapseTwo" class="collapse" role="tabpanel" aria-labelledby="headingTwo" data-parent="#accordion">
      <div class="card-body">

<div class="form-group row">
			<label for="contrast" class="col-6 col-form-label">Contrast</label>
			<div class="col-6">
			<div class="input-group">
			    <span class="input-group-btn">
				<button class="btn btn-secondary" type="button" id="contrast_neg">-</button>
			    </span>
			    <input type="text" class="form-control" id="contrast" readonly value="{{ data[5] }}" >
			    <span class="input-group-btn">
			    	<button class="btn btn-secondary" type="button" id="contrast_pos">+</button>
			    </span>
			</div>
			</div>
			</div>

			<div class="form-group row">
			<label for="saturation" class="col-6 col-form-label">Saturation</label>
			<div class="col-6">
			<div class="input-group">
			    <span class="input-group-btn">
				<button class="btn btn-secondary" type="button" id="saturation_neg">-</button>
			    </span>
			    <input type="text" class="form-control" id="saturation" readonly value="{{ data[6] }}" >
			    <span class="input-group-btn">
			    	<button class="btn btn-secondary" type="button" id="saturation_pos">+</button>
			    </span>
			</div>
			</div>
			</div>

			<div class="form-group row">
			<label for="brightness" class="col-6 col-form-label">Brightness</label>
			<div class="col-6">
			<div class="input-group">
			    <span class="input-group-btn">
				<button class="btn btn-secondary" type="button" id="brightness_neg">-</button>
			    </span>
			    <input type="text" class="form-control" id="brightness" readonly value="{{ data[7] }}" >
			    <span class="input-group-btn">
			    	<button class="btn btn-secondary" type="button" id="brightness_pos">+</button>
			    </span>
			</div>
			</div>
			</div>
      </div>
    </div>
  </div>
</div>




 <div class="card">
    <div class="card-header" role="tab" id="headingLed">
      <h5 class="mb-0">
        <a class="collapsed" data-toggle="collapse" href="#collapseLed" aria-expanded="false" aria-controls="collapseLed">
          LED Strip
        </a>
      </h5>
    </div>
    <div id="collapseLed" class="collapse" role="tabpanel" aria-labelledby="headingLed" data-parent="#accordion">
      <div class="card-body">

<div class="form-group row">
			<label for="contrast" class="col-6 col-form-label">LED brightness</label>
			<div class="col-6">
			<div class="input-group">
			    <span class="input-group-btn">
				<button class="btn btn-secondary" type="button" id="led_neg">-</button>
			    </span>
			    <input type="text" class="form-control" id="ledbrightness" readonly value="{{ data[12] }}" >
			    <span class="input-group-btn">
			    	<button class="btn btn-secondary" type="button" id="led_pos">+</button>
			    </span>
			</div>
			</div>
			
      </div>
    </div>
  </div>
</div>






  <div class="card">
    <div class="card-header" role="tab" id="headingPrinter">
      <h5 class="mb-0">
        <a class="collapsed" data-toggle="collapse" href="#collapsePrint" aria-expanded="false" aria-controls="collapsePrint">
          Printer
        </a>
      </h5>
    </div>
    <div id="collapsePrint" class="collapse" role="tabpanel" aria-labelledby="headingPrinter" data-parent="#accordion">
      <div class="card-body">
			<div class="form-group row">
			<label class="col-6 col-form-label">Printing</label>
			<div class="col-6">
			    <button class="btn btn-primary btn-block" id="printing">{{ data[9] }}</button>
			</div>
			</div>
			<button class="btn btn-success btn-lg btn-block" id="resumeprinter">Resume Printer</button>
			<button class="btn btn-warning btn-lg btn-block" id="disableprinter">Disable Printer</button>
			<button class="btn btn-danger btn-lg btn-block" id="dumpprintqueue">Dump all print jobs</button>			
<!--<button class="btn btn-secondary btn-lg btn-block" id="printerstatus">PrinterStatus</button>
			<textarea class="form-control" readonly id="printerreadout" rows=5>{{ data[10] }}</textarea>-->
			
        </div>
    </div>
  </div>
 

			<pre id="printerstatus" style="white-space: pre-wrap;">{{ data[10] }}</pre>

			<pre id="printerqueue" style="white-space: pre-wrap;">{{ data[11] }}</pre>
		</div>


</div>
</div>



<script type=text/javascript>

$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};

function update_values() {
            $.getJSON($SCRIPT_ROOT+"/sync_webinterface",
                function(data) {
                    $("#photos_taken").attr('value',data.photos)
                    $("#montages_taken").attr('value',data.montages)
                    $("#prints_taken").attr('value',data.prints)
		    $("#contrast").attr('value',data.contrast)
                    $("#saturation").attr('value',data.saturation)
                    $("#brightness").attr('value',data.brightness)
                    $("#flash").text(data.flash)
		    $("#printing").text(data.printing)
		    $("#iso").text(data.iso)
		    $("#shutter").text(data.shutter)
		    $("#printerstatus").text(data.mesg)
		    $("#printerqueue").text(data.queue)
		    $("#ledbrightness").attr('value',data.ledbrightness)
                });
        }

update_values()

setInterval(update_values, 10000)




    $('button').click(function() {
	buttonid=this.id;
 //     $.post($SCRIPT_ROOT + '/button_pressed', data );
	$.ajax({
 	  type : "POST",
  	  url : $SCRIPT_ROOT + '/button_pressed',
	  data: JSON.stringify({'buttonid':buttonid}),
 	  contentType: 'application/json;charset=UTF-8',
 	  success: function(result) {
 	 	 update_values()
    	  }
	});
    });

</script>
  </body>
</html>

